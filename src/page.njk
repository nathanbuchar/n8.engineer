{% extends "layout.njk" %}

{% block content %}
  <div class="page">
    {% if title %}
      <header>
        <h1>{{ title }}</h1>
        {% if date %}
          <time datetime="{{ date }}">
            {{ date }}
          </time>
        {% endif %}
      </header>
    {% endif %}
    {% if hero %}
      <img src="{{ hero.fields.file.url }}" />
    {% endif %}
    {{ content | markdown | safe }}
    {# {% if blogPost %}
      <div class="more">
        <hr>
        <h2>More Posts</h2>
        <div class="posts">
          <ol>
            {% if nextPost %}
              <li>
                <time datetime="{{ nextPost.fields.date | dateToUTC }}">
                  {{ nextPost.fields.date }}
                </time>
                <span>
                  [next] <a href="{{ nextPost.fields.url }}">
                    {{ nextPost.fields.title }}
                  </a>
                </span>
              </li>
            {% endif %}
            {% if prevPost %}
              <li>
                <time datetime="{{ prevPost.fields.date | dateToUTC }}">
                  {{ prevPost.fields.date }}
                </time>
                <span>
                  [prev] <a href="{{ prevPost.fields.url }}">
                    {{ prevPost.fields.title }}
                  </a>
                </span>
              </li>
            {% endif %}
          </ol>
        </div>
        <p>
          <a href="/posts">
            More…
          </a>
        </p>
      </div>
    {% endif %} #}
    {% if allowComments %}
      <div class="comments">
        <hr>
        <h2>Comments</h2>
        {% include "parts/comments.njk" %}
      </div>
    {% endif %}
    {% if showBlogList %}
      <hr>
      <h2>
        Recent Posts<sup class="rss"><a href="/rss.xml">[rss]</a></sup>
      </h2>
      {% set posts = pages | selectByField("blogPost") | sort(true, false, "fields.date") | sort(true, false, "fields.pinned") | batch(5) | first %}
      {% include "parts/posts.njk" %}
      <p><a href="/posts">More…</a></p>
    {% endif %}
  </div>
{% endblock %}
